<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>HIS医院管理系统</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
</head>
<body class="layui-layout-body">
	<div style="padding: 15px;">
		<div>
			添加疾病诊断
		</div>
		<div style="padding-top: 15px;">
			<div style="width: 90%;height: 30px;background: #F5F7FA;display: flex;padding-top:3px;padding-left: 53px;border-radius: 4px;">
				<div>
					<div style="font-size: 13px;color: darkgray;margin-top: 5px;margin-right: 20px;margin-left: 10px;">疾病名称</div>
				</div>
				<div style="display: flex;">
					<div class="xzxm" style="margin-left: 0px;margin-top: -3px;">													
						 <input type="text" id="disease" style="height: 22px;width: 280px;margin-top: 6px;" name="title" lay-verify="title" autocomplete="off" placeholder="" class="layui-input">
					</div>
					<div class="zcxm" style="margin-left: 20px;margin-top: 3px;">
						<button class="layui-btn layui-btn-xs layui-btn-normal" id="cx">&nbsp;查询&nbsp;</button>
					</div>
					
				</div>
			</div>
		</div>
		<table class="layui-hide" id="test" lay-filter="test" lay-data="{id: 'idTest'}"></table>
		<div style="display: flex;">
			<div style="width: 36%;"></div>
			<button class="layui-btn layui-btn-primary" id="qx">取消</button>
			<button class="layui-btn layui-btn-normal" id="tj">确定</button>
		</div>
	</div>
<script src="../layui/jquery-3.3.1.js"></script>
<script src="../layui/layui.js"></script>
<script src="../conmmon/common.js"></script>
<script>
	var a = window.location.href.split("=");
	var url='';
	
	

    layui.use('element', function(){
        var element = layui.element;
    });
	
</script>
<script type="text/html" id="toolbarDemo">
  <div class="layui-btn-container">
    <button class="layui-btn layui-btn-sm" lay-event="getCheckData" style="display: none;">获取选中行数据</button>
  </div>
</script>

<script>
layui.use('table', function(){
  var table = layui.table;
  
  table.render({
    elem: '#test'
    ,url:basePath+'doc/medicalrecord/Null',
	height: 'full-200'
    // ,toolbar: '#toolbarDemo'
    ,cols: [[
      {type:'radio'}
      ,{field:'DiseaseICD',  title: 'ICD编码',width:150}
      ,{field:'DiseaseName',  title: '疾病名称'}
      
    ]]
    ,page: true,
	text: {
		none: '暂无相关数据' //默认：无数据。注：该属性为 layui 2.2.5 开始新增
	}
  });
  
  //头工具栏事件
  table.on('toolbar(test)', function(obj){
    var checkStatus = table.checkStatus(obj.config.id); //获取选中行状态
    switch(obj.event){
      case 'getCheckData':
        var data = checkStatus.data;  //获取选中行数据
        layer.alert(JSON.stringify(data));
      break;
    };
  });
});
$("#cx").click(function(){
		var table = layui.table;
		url=basePath+'doc/disease/get?DiseaseName='+$("#disease").val();
		var tableIns = table.render({
		  elem: '#test',
		  height: 'full-200'
		  ,cols:[[
		    {type:'radio'}
		    ,{field:'DiseaseICD',  title: 'ICD编码',width:150}
		    ,{field:'DiseaseName',  title: '疾病名称'}
		    
		  ]] //设置表头
		  ,url: url //设置异步接口
		  ,id: 'idTest',page: true
		}); 
		 
		//这里以搜索为例
		tableIns.reload({
		  text: {
		  	none: '暂无相关数据' //默认：无数据。注：该属性为 layui 2.2.5 开始新增
		  }
		});
	})
$("#tj").click(function(){
		var table = layui.table;
		var checkStatus = table.checkStatus('idTest'); //idTest 即为基础参数 id 对应的值
		var data = checkStatus.data;
		// console.log(data) //获取选中行的数据
		localStorage.jibing=JSON.stringify(data);
		localStorage.kind=a[1];
		console.log(JSON.stringify(data));
		var index=parent.layer.getFrameIndex(window.name);
		parent.layer.close(index);
	})
</script>
		








</body>
</html>